<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VocalPoint AI Kiosk</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        /* Custom scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f5f9; /* slate-100 */
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #94a3b8; /* slate-400 */
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #64748b; /* slate-500 */
        }

        /* Styling for the active navigation button */
        .nav-btn.active {
            box-shadow: 0 0 0 2px theme('colors.indigo.500');
            font-weight: 600;
        }

        /* Styling for the pulsing microphone */
        .mic-pulse {
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0px theme('colors.red.400'); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0px rgba(239, 68, 68, 0); }
        }

        /* Styling for analysis results */
        #analysisResult .word {
            padding: 2px 4px;
            border-radius: 4px;
            margin: 1px;
            display: inline-block;
            transition: all 0.3s ease;
        }
        #analysisResult .word.correct {
            background-color: #dcfce7; /* green-100 */
            color: #166534; /* green-800 */
        }
        #analysisResult .word.mispronounced {
            background-color: #fee2e2; /* red-100 */
            color: #991b1b; /* red-800 */
            font-weight: 600;
            cursor: pointer;
            border-bottom: 2px dashed #b91c1c; /* red-700 */
        }
        #analysisResult .word.omitted {
            background-color: #f1f5f9; /* slate-100 */
            color: #64748b; /* slate-500 */
            text-decoration: line-through;
            cursor: pointer;
        }
        
        /* NEW: Performance bars in analytics */
        .perf-bar {
            width: 24px;
            height: 80px;
            background: #f1f5f9;
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }
        .perf-bar-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: #818cf8;
            transition: height 0.3s ease;
        }
        
        /* Hide teacher view by default */
        #teacherView {
            display: none;
        }
  </style>
 </head>
 <body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen font-sans">
  <div id="app" class="container mx-auto px-4 py-6 max-w-4xl">
    <!-- Header -->
    <div class="text-center mb-8">
      <img src="https://i.postimg.cc/pL8gLQGZ/Vocal-Point.png" alt="VocalPoint AI Logo" class="mx-auto h-20 w-auto mb-3" onerror="this.src='https://placehold.co/300x80/e0e7ff/3730a3?text=VocalPoint+AI'; this.alt='VocalPoint AI';">
      <p class="text-indigo-600">English Speaking Practice Kiosk</p>
    </div>
    <!-- Teacher View Toggle -->
    <div class="flex justify-end mb-4">
      <button id="teacherToggle" onclick="toggleTeacherView()" class="inline-flex items-center gap-2 px-3 py-2 rounded-xl border shadow-sm bg-white hover:bg-gray-50 transition-colors" title="Toggle Teacher View (T)">
        <svg class="w-4 h-4" fill="currentColor" viewbox="0 0 24 24">
          <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" />
        </svg>
        <span class="text-sm font-medium">Teacher View</span>
      </button>
    </div>
    <!-- Navigation -->
    <div class="bg-white rounded-2xl shadow-lg p-4 mb-6">
      <div class="flex flex-wrap gap-2 justify-center">
        <button onclick="showPage('intro', this)" class="nav-btn bg-indigo-100 text-indigo-800 px-4 py-2 rounded-lg font-medium hover:bg-indigo-200 transition-colors"> üìñ How to Use </button>
        <button onclick="showPage('unit1', this)" class="nav-btn bg-green-100 text-green-800 px-4 py-2 rounded-lg font-medium hover:bg-green-200 transition-colors"> Unit 1: Welcome! </button>
        <button onclick="showPage('unit2', this)" class="nav-btn bg-blue-100 text-blue-800 px-4 py-2 rounded-lg font-medium hover:bg-blue-200 transition-colors"> Unit 2: Every Day </button>
        <button onclick="showPage('unit3', this)" class="nav-btn bg-purple-100 text-purple-800 px-4 py-2 rounded-lg font-medium hover:bg-purple-200 transition-colors"> Unit 3: Right Now </button>
        <button onclick="showPage('unit4', this)" class="nav-btn bg-yellow-100 text-yellow-800 px-4 py-2 rounded-lg font-medium hover:bg-yellow-200 transition-colors"> Unit 4: Year In, Year Out </button>
        <button onclick="showPage('unit5', this)" class="nav-btn bg-pink-100 text-pink-800 px-4 py-2 rounded-lg font-medium hover:bg-pink-200 transition-colors"> Unit 5: My New House </button>
        <button onclick="showPage('unit6', this)" class="nav-btn bg-orange-100 text-orange-800 px-4 py-2 rounded-lg font-medium hover:bg-orange-200 transition-colors"> Unit 6: Food, Please! </button>
        <button onclick="showPage('unit7', this)" class="nav-btn bg-teal-100 text-teal-800 px-4 py-2 rounded-lg font-medium hover:bg-teal-200 transition-colors"> Unit 7: Out And About </button>
        <button onclick="showPage('unit8', this)" class="nav-btn bg-red-100 text-red-800 px-4 py-2 rounded-lg font-medium hover:bg-red-200 transition-colors"> Unit 8: Yesterday </button>
        <button onclick="showPage('unit9', this)" class="nav-btn bg-cyan-100 text-cyan-800 px-4 py-2 rounded-lg font-medium hover:bg-cyan-200 transition-colors"> Unit 9: On Holiday </button>
        <button onclick="showPage('unit10', this)" class="nav-btn bg-emerald-100 text-emerald-800 px-4 py-2 rounded-lg font-medium hover:bg-emerald-200 transition-colors"> Unit 10: World Around Us </button>
        <button onclick="showPage('custom', this)" class="nav-btn bg-violet-100 text-violet-800 px-4 py-2 rounded-lg font-medium hover:bg-violet-200 transition-colors"> ‚úèÔ∏è Write Your Own </button>
      </div>
    </div>
    <!-- Main Content Grid -->
    <div id="mainGrid" class="grid lg:grid-cols-2 gap-6 items-start">
      <!-- Student Interface -->
      <div id="studentView" class="bg-white rounded-2xl shadow-lg p-6 space-y-6">
        <!-- Page Content -->
        <div id="pageContent">
          <!-- Content loads here -->
        </div>
        <!-- Analysis Results -->
        <div id="analysisResult" class="space-y-4">
          <h3 class="text-xl font-semibold text-gray-800">Your Analysis</h3>
          <div id="analysisContainer" class="hidden">
            <div class="flex items-center justify-between">
              <span class="text-lg font-medium text-gray-700">Pronunciation Score:</span>
              <span id="score" class="text-3xl font-bold text-indigo-600">...</span>
            </div>
            <div id="coloredText" class="p-4 bg-gray-50 rounded-lg text-lg leading-relaxed"></div>
            <div class="mt-4">
              <span class="text-lg font-medium text-gray-700">Detailed Feedback:</span>
              <p id="aiFeedbackDetails" class="p-4 bg-indigo-50 text-indigo-800 rounded-lg mt-2 text-base">...</p>
            </div>
          </div>
        </div>
        <!-- Message Box -->
        <div id="messageBox" class="hidden p-4 rounded-lg"></div>
        <!-- Loading Indicator -->
        <div id="loadingIndicator" class="hidden flex items-center justify-center p-4">
          <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
          <span class="ml-2 text-indigo-600">Processing...</span>
        </div>
      </div>
      <!-- Teacher View (Hidden by default) -->
      <div id="teacherView" class="space-y-6">
        <!-- Logged Attempts -->
        <div class="bg-white rounded-2xl shadow-lg p-6">
          <span class="flex items-center gap-2 text-xl font-semibold text-gray-800">
            <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24"><path d="M9 11v6h2V7H9v4zm2 8c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm0-16C6.48 3 2 7.48 2 13s4.48 10 10 10 10-4.48 10-10S17.52 3 12 3zm4 12v-2h2v2h-2zm-6-6v6h2V7H9v2z" /></svg>
            <span>Logged Attempts</span>
          </span>
          <div id="log" class="mt-4 space-y-3 h-64 overflow-y-auto custom-scrollbar pr-2">
            <!-- Log items go here -->
          </div>
          <button onclick="clearLocalStorage()" class="mt-4 w-full px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm">Clear All Local Logs</button>
        </div>
        <!-- Teacher Feedback -->
        <div class="bg-white rounded-2xl shadow-lg p-6">
          <span class="flex items-center gap-2 text-xl font-semibold text-gray-800">
            <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" /></svg>
            <span>Teacher Feedback</span>
          </span>
          <div class="mt-4 space-y-3">
            <div>
              <label for="teacherFeedback" class="block text-sm font-medium text-gray-600">Feedback for this attempt</label>
              <textarea id="teacherFeedback" class="mt-1 block w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 resize-none" rows="2" placeholder="Optional feedback..."></textarea>
            </div>
          </div>
        </div>
        <!-- Analytics -->
        <div class="bg-white rounded-2xl shadow-lg p-6">
          <span class="flex items-center gap-2 text-xl font-semibold text-gray-800">
            <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24"><path d="M4 9h4v11H4zM16 4h4v16h-4zM10 13h4v7h-4z" /></svg>
            <span>Class Analytics</span>
          </span>
          <div id="analytics" class="mt-4 space-y-3">
            <div class="flex justify-between items-center">
              <span class="text-gray-600">Total Attempts:</span>
              <span id="totalAttempts" class="font-bold text-lg">0</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-gray-600">Average Score:</span>
              <span id="avgScore" class="font-bold text-lg">N/A</span>
            </div>
            <div class="mt-2">
              <span class="text-gray-600">Most Common Mistake:</span>
              <div id="commonMistakes" class="p-2 bg-gray-50 rounded-md mt-1 font-mono text-sm">No data.</div>
            </div>
            <div class="mt-2">
              <span class="text-gray-600">Units Practiced:</span>
              <span id="unitsPracticed" class="font-bold text-lg">0</span>
            </div>
            <div class="mt-2">
              <span class="text-gray-600">Recent Performance:</span>
              <div id="recentPerformance" class="flex gap-1 mt-1"></div>
            </div>
          </div>
        </div>
        <!-- Student/Class Info -->
        <div class="bg-white rounded-2xl shadow-lg p-6">
          <span class="flex items-center gap-2 text-xl font-semibold text-gray-800">
            <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" /></svg>
            <span>Student & Class Info</span>
          </span>
          <div class="mt-4 space-y-3">
            <div>
              <label for="studentName" class="block text-sm font-medium text-gray-600">Student Name</label>
              <input type="text" id="studentName" class="mt-1 block w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" placeholder="e.g., John Smith">
            </div>
            <div>
              <label for="studentClass" class="block text-sm font-medium text-gray-600">Class / Section</label>
              <input type="text" id="studentClass" class="mt-1 block w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" placeholder="e.g., Class 10-B">
            </div>
          </div>
        </div>
        <!-- Teacher Tips -->
        <div class="bg-white rounded-2xl shadow-lg p-6">
          <span class="flex items-center gap-2 text-xl font-semibold text-gray-800">
            <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" /></svg>
            <span>Teacher Tips</span>
          </span>
          <ul class="list-disc pl-6 space-y-2 text-sm text-gray-700 mt-3">
            <li>Keep turns short (‚âà2 minutes). Others do pairwork while one pupil uses the kiosk.</li>
            <li>Celebrate progress publicly but keep individual scores private to avoid embarrassment.</li>
            <li>Use the dashboard to plan 5‚Äëminute phoneme warm‚Äëups (e.g., /th/, /r/, /sh/).</li>
            <li>Always offer a no‚Äëtech alternative (paper prompt + teacher check).</li>
          </ul>
        </div>
        <!-- Admin Info -->
        <div class="bg-white rounded-2xl shadow-lg p-6">
          <span class="flex items-center gap-2 text-xl font-semibold text-gray-800">
            <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24"><path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.82,11.69,4.82,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z" /></svg>
            <span>Admin</span>
          </span>
          <div class="flex flex-wrap gap-2 text-sm mb-3">
            <span class="px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">Client-side only</span>
            <span class="px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">Gemini AI powered</span>
            <span class="px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700">Local storage</span>
          </div>
          <div class="text-xs text-gray-500">Analysis is powered by Google's Gemini AI API for pronunciation assessment.</div>
        </div>
      </div>
    </div>
  </div>
  <script src="app.js"></script>
  </body>
</html>